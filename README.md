# Тестовое задание для Foxford

<details>
<summary>Задание 1: Docker и Nginx</summary>

Нам нужно развернуть простой статический сайт с помощью Docker.

**Задача:**

1. Создай простой index.html файл с текстом "Hello, Foxford!".
2. Создай кастомный конфигурационный файл для Nginx nginx.conf, который будет отдавать этот статический сайт.
3. Напиши docker-compose.yml, который:
   - Использует официальный образ nginx:alpine.
   - Запускает контейнер с именем foxford-web.
   - Пробрасывает порт 8080 с хост-машины на порт 80 контейнера.
   - Монтирует (пробрасывает) локальную директорию с index.html и nginx.conf внутрь контейнера.
</details>


<details>
<summary>Задание 2: Теория и Траблшутинг</summary>

Это теоретический вопрос, чтобы понять твой ход мыслей. Код писать не нужно.

**Ситуация:**
В системе мониторинга ты видишь алерт: на одном из серверов с нашим веб-приложением CPU utilization держится на уровне 100% уже 5 минут.

**Задача:**
Опиши по шагам, как ты будешь диагностировать и решать проблему. Какие команды и инструменты ты будешь использовать?
</details>


<details>
<summary>Задание 3: Настройка сети (L2/L3)</summary>

Это задание проверяет твое понимание сетевой архитектуры и навыки настройки сети в Linux.

**Ситуация:**
Представим, что у нас есть сервер с одним физическим сетевым интерфейсом eth0. Нам необходимо подключить этот сервер к двум разным сетям (VLAN), которые приходят на этот интерфейс "тегом":

1. **Основная сеть (Public):** Использует VLAN ID 10.
2. **Сеть управления (Management):** Использует VLAN ID 20.

**Задача:**
Необходимо настроить сеть на сервере (предполагаем, что это Ubuntu Server 20.04 или новее) для выполнения следующих условий:

- Сервер должен получить IP-адрес 192.168.10.5/24 в **основной сети**. Шлюз по умолчанию для всего трафика должен быть 192.168.10.1.
- Сервер должен получить IP-адрес 10.10.20.5/24 в **сети управления**.
- Весь трафик до сети 10.10.30.0/24 (где находится наше бэкап-хранилище) должен идти через шлюз в сети управления — 10.10.20.1.

**Формат ответа:**

Напиши конфигурационный файл для netplan, который реализует данную схему. Или приведи последовательность команд утилиты ip, которые бы выполнили ту же настройку.
</details>


<details>
<summary>Задание 4: PostgreSQL</summary>

**Ситуация:**
К нам в команду приходит новый разработчик, и для его проекта нужно подготовить базу данных.

**Задача:**
Напиши SQL-скрипт и команды для командной строки, которые последовательно выполняют следующие действия:

1. Создают нового пользователя (роль) с именем foxford_dev и паролем SuperSecretPassword123. Пользователь должен иметь возможность подключаться к базе данных.
2. Создают новую базу данных с именем foxford_project.
3. Назначают пользователя foxford_dev владельцем базы данных foxford_project.
4. Подключившись к новой базе foxford_project, создают таблицу tasks со следующей структурой:
   - id (первичный ключ, автоинкремент)
   - title (текст, не может быть пустым)
   - created_at (timestamp, по умолчанию текущее время)
5. Добавляют в таблицу tasks одну запись: (title: 'Настроить сервер').
6. С помощью утилиты pg_dump создают два файла бэкапа:
   - foxford_project_full.sql — полный бэкап базы данных foxford_project.
   - foxford_project_schema.sql — бэкап, содержащий только схему данных (без самих данных).

**Формат ответа:**

- Создай файл solution.sql, содержащий все SQL-команды для шагов 1-5.
- Создай файл backup_commands.sh, содержащий команды для pg_dump для шага 6.
</details>


<details>
<summary>Задание 5: Bash-скриптинг и основы Linux (по желанию)</summary>


На сервере скопилось много лог-файлов. Нам нужно периодически архивировать старые логи, чтобы освободить место.

**Задача:**
Напиши bash-скрипт archiver.sh, который:

1. Принимает один аргумент — путь к директории с логами.
2. Находит в этой директории все файлы с расширением .log, которые были изменены более 7 дней назад.
3. Создает из найденных файлов tar.gz архив с именем logs_YYYY-MM-DD.tar.gz (где YYYY-MM-DD — текущая дата).
4. После успешного создания архива удаляет исходные файлы логов, которые были добавлены в архив.
5. Выводит в консоль информацию о том, какие файлы были заархивированы и удалены.
</details>


<details>
<summary>Задание 6: Ansible (по желанию)</summary>

**Задача:** Напиши простой playbook install_tools.yml, который на целевой машине (считаем, что это Ubuntu) устанавливает пакеты mc и htop.
</details>
